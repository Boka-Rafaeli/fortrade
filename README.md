# Playwright E2E Boilerplate

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π TypeScript boilerplate –¥–ª—è E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Playwright, POM –ø–∞—Ç—Ç–µ—Ä–Ω–∞, Allure reporting –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏-–æ–∫—Ä—É–∂–µ–Ω–∏–π.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä–æ–≥–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

```
app ‚Üí screens ‚Üí components
```

- **App**: –û–ø–µ—Ä–∞—Ü–∏–∏ —Å Page/BrowserContext (–Ω–∞–≤–∏–≥–∞—Ü–∏—è, refresh, tabs)
- **Screens**: –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, —ç–∫—Ä–∞–Ω-—É—Ä–æ–≤–Ω–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- **Components**: –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è locators –∏ UI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- **Flows**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è app + screens + components
- **Helpers**: API –∫–ª–∏–µ–Ω—Ç—ã, —É—Ç–∏–ª–∏—Ç—ã, data builders

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/src
  /app              # App –∫–ª–∞—Å—Å —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ screens
  /screens           # Page Object Model —ç–∫—Ä–∞–Ω—ã
  /components        # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è locators)
  /flows             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ user flows
  /helpers           # API –∫–ª–∏–µ–Ω—Ç—ã, —É—Ç–∏–ª–∏—Ç—ã, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
  /config            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π
/tests
  /api               # API setup —É—Ç–∏–ª–∏—Ç—ã
  /e2e               # E2E —Ç–µ—Å—Ç—ã
  /fixtures          # Playwright fixtures
  /models            # TypeScript —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤ Playwright

```bash
npx playwright install
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ (dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
npm test

# –° —É–∫–∞–∑–∞–Ω–∏–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è
npm run test:dev
npm run test:stage
npm run test:prod

# –° UI —Ä–µ–∂–∏–º–æ–º
npm run test:ui

# –í headed —Ä–µ–∂–∏–º–µ
npm run test:headed
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

```bash
# Allure –æ—Ç—á–µ—Ç
npm run report:allure

# Playwright HTML –æ—Ç—á–µ—Ç
npm run report:html
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `dev`, `stage`, `prod`.

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤:
- `src/config/env/dev.env`
- `src/config/env/stage.env`
- `src/config/env/prod.env`

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
- `BASE_URL` - –±–∞–∑–æ–≤—ã–π URL –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `API_BASE_URL` - –±–∞–∑–æ–≤—ã–π URL API

## üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

### –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥: API Setup + UI

–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

1. **API Setup** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ API
2. **UI Execution** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —á–µ—Ä–µ–∑ UI
3. **Cleanup** - –æ—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ—Ä:

```typescript
test('should login successfully', async ({ app, request }) => {
  // 1. API Setup
  const { context, cleanup } = await setupTestUser(request);
  
  try {
    // 2. UI Execution
    const authFlow = new AuthFlow(app);
    await authFlow.loginAndVerifyHome(context.user.email, context.user.password);
  } finally {
    // 3. Cleanup
    if (cleanup) await cleanup();
  }
});
```

## üéØ –ü—Ä–∞–≤–∏–ª–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### Components (—Å—Ç—Ä–æ–≥–æ)
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è `page.locator(...)`
- ‚úÖ –í—Å–µ UI –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (click, fill, select)
- ‚úÖ UI assertions

### Screens
- ‚úÖ –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –≠–∫—Ä–∞–Ω–æ-—É—Ä–æ–≤–Ω–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- ‚ùå –ù–ï–¢ –ø—Ä—è–º—ã—Ö –≤—ã–∑–æ–≤–æ–≤ `page.locator`

### App
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è, refresh, tabs
- ‚úÖ –î–æ—Å—Ç—É–ø –∫ screens —á–µ—Ä–µ–∑ `app.screens`
- ‚ùå –ù–ï–¢ feature-specific –ª–æ–≥–∏–∫–∏

### Flows
- ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- ‚úÖ –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è app + screens + components
- ‚ùå –ù–ï–¢ locators

## üìä Allure Reporting

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –≤ Allure steps —á–µ—Ä–µ–∑ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@step()`:

```typescript
@step('Login as user')
async login(username: string, password: string): Promise<void> {
  // ...
}
```

## üîÑ CI/CD

GitHub Actions workflow –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è:
- –ó–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- –ü—É–±–ª–∏–∫–∞—Ü–∏–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (Playwright report, Allure results, traces)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Playwright Documentation](https://playwright.dev)
- [Allure Playwright](https://github.com/allure-framework/allure-js/tree/master/packages/allure-playwright)
- [TypeScript Documentation](https://www.typescriptlang.org/docs/)

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ `src/components/{feature}/`
2. –°–æ–∑–¥–∞–π—Ç–µ —ç–∫—Ä–∞–Ω –≤ `src/screens/{feature}/{Feature}Screen.ts`
3. –î–æ–±–∞–≤—å—Ç–µ —ç–∫—Ä–∞–Ω –≤ `src/app/Screens.ts`
4. –°–æ–∑–¥–∞–π—Ç–µ flow –≤ `src/flows/{feature}/{Feature}Flow.ts` (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `tests/e2e/{feature}.spec.ts`
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fixtures –∏–∑ `tests/fixtures/testFixtures.ts`
3. –°–ª–µ–¥—É–π—Ç–µ –≥–∏–±—Ä–∏–¥–Ω–æ–º—É –ø–æ–¥—Ö–æ–¥—É: API setup ‚Üí UI ‚Üí Cleanup

## ‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (TODO: –£–±—Ä–∞—Ç—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API)

**–í–ê–ñ–ù–û:** –°–ª–µ–¥—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—ã–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç–µ—Å—Ç–æ–≤ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API —Å–µ—Ä–≤–µ—Ä–∞. –ò—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±—Ä–∞—Ç—å –∏–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –±—ç–∫–µ–Ω–¥–∞:

### 1. API –ú–æ–∫–∏ (`tests/api/mocks.ts`)
- **–§–∞–π–ª:** `tests/api/mocks.ts`
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ú–æ–∫–∏—Ä—É–µ—Ç API endpoints —á–µ—Ä–µ–∑ Playwright route interception
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `tests/e2e/auth.spec.ts` —á–µ—Ä–µ–∑ `beforeEach`
- **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
  - –ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API: —É–¥–∞–ª–∏—Ç—å –≤—ã–∑–æ–≤ `setupApiMocks()` –∏–∑ `beforeEach` –≤ —Ç–µ—Å—Ç–∞—Ö
  - –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –º–æ–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API –≤ CI/CD

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Fixtures (`tests/fixtures/testFixtures.ts`)
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** Fixture `request` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `page.request` –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ `request`
- **–ü—Ä–∏—á–∏–Ω–∞:** `page.request` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç route interception –¥–ª—è –º–æ–∫–æ–≤
- **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
  - –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API: –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `request` fixture –∏–∑ Playwright
  - –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ –º–æ–∫–∏ –Ω—É–∂–Ω—ã –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤

### 3. –¢–µ—Å—Ç—ã —Å –º–æ–∫–∞–º–∏ (`tests/e2e/auth.spec.ts`)
- **–ò–∑–º–µ–Ω–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω `beforeEach` —Å –≤—ã–∑–æ–≤–æ–º `setupApiMocks(page)`
- **–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:**
  - –£–±—Ä–∞—Ç—å `beforeEach` —Å `setupApiMocks()` –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ API
  - –ò–ª–∏ —Å–¥–µ–ª–∞—Ç—å —É—Å–ª–æ–≤–Ω—ã–º: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–∫–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** –û—Å—Ç–∞–≤–∏—Ç—å –º–æ–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
2. **–î–ª—è CI/CD:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä
3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `USE_API_MOCKS` –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –º–æ–∫–∞–º–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–º API

### –ü—Ä–∏–º–µ—Ä —É—Å–ª–æ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–∫–æ–≤:
```typescript
test.beforeEach(async ({ page }) => {
  if (process.env.USE_API_MOCKS === 'true' || !process.env.API_BASE_URL) {
    await setupApiMocks(page);
  }
});
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

ISC

